<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="style08.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignment 8</title>
    
</head>

<body>
  <h1>JavaScript Item Catalog</h1>
  <a href="../index.html">CS213 Home Page</a>
  <br>
  <br>
  <div class="validator">
  <label for="first_name">First Name</label><br>
  <input id="first_name" type="text" name="first_name" value="";>
  <br>
  <label for="last_name">Last Name</label><br>
  <input id="last_name" type="text" name="last_name" value="">
  <br>
  <label for="address">Address</label><br>
  <textarea id="address" name="address" rows="4" cols="50"></textarea>
  <br>
  <label for="phone">Phone</label><br>
  <input id="phone" type="text" name="phone" value="">
  <br>
  <input type="checkbox" id="item_0" name="item_0" value="" onclick="function1()">
  <label for="item_0"> Breakfast Omlette - $7.95</label><br>
  <input type="checkbox" id="item_1" name="item_1" value="" onclick="function1()">
  <label for="item_1"> Endless Pancake Stack - $13.95</label><br>
  <input type="checkbox" id="item_2" name="item_2" value="" onclick="function1()">
  <label for="item_2"> French Toast and Bacon - $9.95</label> <br>
  <input type="checkbox" id="item_3" name="item_3" value="" onclick="function1()">
  <label for="item_3"> Egg White Slim-Special - $6.95</label>
  <br>
  <br>
  <label for="total">Total</label><br>
  <input type="text" id="total" name="total" value="" readonly>
  <br>
  <br>
  <hr>
  <p>Credit Card Type</p>
  <input type="radio" id="card" name="card" value="visa">
  <label for="visa">Visa</label><br>
  <input type="radio" id="card2" name="card" value="american_express">
  <label for="american_express">American Express</label><br>
  <input type="radio" id="card3" name="card" value="mastercard">
  <label for="mastercard">Mastercard</label>
  <br>
  <br>
  <label for="credit_card">Credit Card #</label><br>
  <input id="credit_card" type="text" name="credit_card" value="">
  <br>
  <label for="exp_date">Credit Card Expiration Date</label><br>
  <input id="exp_date" type="text" name="exp_date" value="">
  <br>
  <br>
  <button type="reset" id="clear" onclick="onClear()">Clear Form</button>
  <button type="button" id="validate" onclick="validateData()">Click Me!</button>
  <br>
  <p id="error"></p>
</div>

  <script>

    function function1(){
      var item0 = document.getElementById("item_0");
      var item1 = document.getElementById("item_1");
      var item2 = document.getElementById("item_2");
      var item3 = document.getElementById("item_3");
      var total = document.getElementById("total");
      var sum = 0.0;

      document.getElementById("error").style.backgroundColor = "gray";
      document.getElementById("error").innerHTML = "";

    if (item0.checked){
      sum += 7.95;
      }
    else{
      sum = sum;
      }

    if (item1.checked){
      sum += 13.95;
      }
    else{
      sum = sum;
      }

    if (item2.checked){
      sum += 9.95;
      }
    else{
      sum = sum;
      }

    if (item3.checked){
      sum += 6.95;
      }
    else{
      sum = sum;
      }

      total.value = "$" + sum.toFixed(2);
    }

    function validateData() {
      var errorMessage = document.getElementById("error");
      errorMessage.style.backgroundColor = "gray";
      errorMessage.innerHTML = "";
        
      
      var valid = false;
      var nameRegExp = /[a-zA-Z]/g;
      var phoneRegExp = /(\d{3})[-](\d{3})[-](\d{4})$/;
      var cardRegExp = /(\d{4})[ ](\d{4})[ ](\d{4})[ ](\d{4})$/g;
      var expDateRegExp = /(0[0-9]|1[0-2])([/])([2-9][0-9][2-9][0-9])$/g;

      var fname = document.getElementById("first_name").value;
      var lname = document.getElementById("last_name").value;
      var address = document.getElementById("address").value;
      var phone = document.getElementById("phone").value;
      var total = document.getElementById("total").value;
      var card = document.getElementById("card").value;
      var credit_card = document.getElementById("credit_card").value;
      var exp_date = document.getElementById("exp_date").value; 

      var item0 = document.getElementById("item_0");
      var item1 = document.getElementById("item_1");
      var item2 = document.getElementById("item_2");
      var item3 = document.getElementById("item_3");

      var cardType1 = document.getElementById("card");
      var cardType2 = document.getElementById("card2");
      var cardType3 = document.getElementById("card3");

      if (!nameRegExp.test(fname)){
        errorMessage.style.backgroundColor = "yellow";
        errorMessage.innerHTML = "ERROR: Invalid First Name. Please use only alphabetic characters.";
        document.getElementById("first_name").focus();
      }
      else if (!nameRegExp.test(lname)){
        errorMessage.style.backgroundColor = "yellow";
        errorMessage.innerHTML = "ERROR: Invalid Last Name. Please use only alphabetic characters.";
        document.getElementById("last_name").focus();
      }
      else if (address == ""){
        errorMessage.style.backgroundColor = "yellow";
        errorMessage.innerHTML = "ERROR: Invalid Address. Please enter a shipping address";
        document.getElementById("address").focus();
      }
      else if (!phoneRegExp.test(phone)){
        errorMessage.style.backgroundColor = "yellow";
        errorMessage.innerHTML = "ERROR: Invalid Phone Number. Please use the format \'###-###-####\'";
        document.getElementById("phone").focus();
      }
      else if (!cardRegExp.test(credit_card)){
        errorMessage.style.backgroundColor = "yellow";
        errorMessage.innerHTML = "ERROR: Invalid Card Number. Please use the format \'#### #### #### ####\'";
        document.getElementById("credit_card").focus();
      }
      else if (!expDateRegExp.test(exp_date)){
        errorMessage.style.backgroundColor = "yellow";
        errorMessage.innerHTML = "ERROR: Invalid Expiration Date. Please use the format \'##/####\' and ensure it is a date later than 2020";
        document.getElementById("exp_date").focus();
      }
      else if(!item0.checked && !item1.checked && !item2.checked && !item3.checked){
        errorMessage.style.backgroundColor = "yellow";
        errorMessage.innerHTML = "ERROR: No items selected. Please select one or more items to purchase.";
        
      }
      else if(!cardType1.checked && !cardType2.checked && !cardType3.checked) {
        errorMessage.style.backgroundColor = "yellow";
        errorMessage.innerHTML = "ERROR: No Credit Card type selected. Please select an available option.";
      }
      else{
        errorMessage.style.backgroundColor = "green";
        errorMessage.innerHTML = "-Order Submitted-";
      }

    }

    function onClear(){
      document.getElementById("first_name").value = "";
      document.getElementById("last_name").value = "";
      document.getElementById("address").value = "";
      document.getElementById("phone").value = "";
      document.getElementById("total").value = "";
      document.getElementById("card").value = "";
      document.getElementById("credit_card").value = "";
      document.getElementById("item_0").checked = false;
      document.getElementById("item_1").checked = false;
      document.getElementById("item_2").checked = false;
      document.getElementById("item_3").checked = false;
      document.getElementById("card").checked = false;
      document.getElementById("card2").checked = false;
      document.getElementById("card3").checked = false;

      document.getElementById("exp_date").value = "";
      document.getElementById("first_name").focus();
    }
    </script>
</body>
</html>